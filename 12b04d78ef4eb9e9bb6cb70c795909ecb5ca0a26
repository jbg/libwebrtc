{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "194352ce_5794651f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "And what is the expected result?",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1f05bf2d_81208d63",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 39,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "194352ce_5794651f",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b860265_0966146f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "Can you file a relevant bug?",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38f53676_efbb06ac",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 41,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5b860265_0966146f",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25e5c6cd_6dbe3492",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "No tests, so can\u0027t possibly be ready for review....\n",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "280207d5_863a59f5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "enjoy the parametrized test :-)\nI didn\u0027t see a good way to add a test in pc/media_session (which does not deal with SDP)",
      "parentUuid": "25e5c6cd_6dbe3492",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8ac9f40_7d93753e",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 2203,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "i think this needs a separate bug to be filed: \"can we delete this line?\" - so phrase as TODO.\nShould be easy to resolve - delete the line and see if anything changes :-) - but needs a separate CL.",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99ba8ab1_cc7363c3",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 2203,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "We could actually look at the local rtx-time here but since we don\u0027t have an API and I do not want to allow changing the nack buffer size through SDP munging...\n\nRemoved the question. The line is valid I think.",
      "parentUuid": "c8ac9f40_7d93753e",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa8a8986_8f20aef6",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 3293,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "rtx_time\u003d0 would mean that you disable the nack buffer. You allow it. Intentional?\n(ignoring rtx_time\u003d-1 as a misconfiguration seems like a Good Thing)",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cd260aa_3e5a7040",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 3293,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "disallowing 0 now since if you want to disable nack, you don\u0027t negotiate. One way to do that is enough.",
      "parentUuid": "fa8a8986_8f20aef6",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9bdd9e94_127e51ac",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 3293,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-02-23T10:50:14Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6cd260aa_3e5a7040",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fd23bdf_85b250fc",
        "filename": "media/engine/webrtc_video_engine.cc",
        "patchSetId": 4
      },
      "lineNbr": 3352,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "1 second (noting for reference)",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8101d297_9b92134d",
        "filename": "video/rtp_video_stream_receiver2.cc",
        "patchSetId": 4
      },
      "lineNbr": 114,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "We\u0027ll take this branch if rtx-time\u003d0 is received, right? Do we have a test that exercises that?",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "686c0d8d_949082ee",
        "filename": "video/rtp_video_stream_receiver2.cc",
        "patchSetId": 4
      },
      "lineNbr": 114,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "I assume there is an existing test that covers NACK not being negotiated. rtx-time\u003d0 is no longer allowed.",
      "parentUuid": "8101d297_9b92134d",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad614667_8940d1df",
        "filename": "video/rtp_video_stream_receiver2.cc",
        "patchSetId": 4
      },
      "lineNbr": 116,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "QUESTION or TODO(bug: do it later)?",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71a7dbd4_a8799ef0",
        "filename": "video/rtp_video_stream_receiver2.cc",
        "patchSetId": 4
      },
      "lineNbr": 116,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ad614667_8940d1df",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96cc15e7_1f6a81d0",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 193,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "This description isn\u0027t correct - the conversion factor is the extra time you wait for a keyframe compared to the time you wait for an ordinary frame, which is not the same as you say here.",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "419b2d52_373ef865",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 193,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "No? Now the terminology here is confusing since max_wait_for_keyframe is the time to between sending PLIs while max wait for frame is the time you wait for a normal frame after a valid frame.\n\nNote that there are some timing issues here since PLIs will only be sent for what is considered to be an \"active\" stream which is hardcoded as 5s in HandleFrameBufferTimeout.",
      "parentUuid": "96cc15e7_1f6a81d0",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c0e58f1_c58398b7",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-01-28T06:31:29Z",
      "side": 1,
      "message": "This has the interesting property that if the buffer is configured by rtx-time to be larger than 1000 ms (1/3 of kMaxWaitForFrame), the field trial will be preferred. (Can\u0027t happen in this CL, but that depends on the precise values of kMaxWaitForFrame and kNackHistoryMs).\n\nThis may be a surprising result for the user.",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0c0ab0c_408d2291",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 14874
      },
      "writtenOn": "2021-02-18T12:10:13Z",
      "side": 1,
      "message": "only if field trial is set? And even then an explicit rtx-time should override field-trial based experimentation.",
      "parentUuid": "4c0e58f1_c58398b7",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e56bcf6_f2083bb5",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 5634
      },
      "writtenOn": "2021-02-23T10:50:14Z",
      "side": 1,
      "message": "if config.rtp.nack.rtp_history_ms is 1000, and kMaxWaitForFrameMs is 1000, then the comparison returns false (checking 3000 \u003c 1000), and the function returns *wait_time_from_field_trial (if set). If the \u003c is intended to guard against overlarge rtp_history_ms values, I\u0027d expect it to be\n\nif (config.rtp.nack.rtp_history:ms \u003e 0) {\n  if (conversion_factor * config.rtp_nack.rtp_history_ms \u003c kMaxWaitForFrameMs)\n     return ....\n  else\n     return kMaxWaitForFrameMs; // clamp to maximum value\n} else if (wait_time_from_field_trial) {\n ...\n\n(it seems a bit strange that wait_time_from_field_trial is used unmodified for both types of wait, though...)",
      "parentUuid": "f0c0ab0c_408d2291",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c72828d2_07b5c29e",
        "filename": "video/video_receive_stream2.cc",
        "patchSetId": 4
      },
      "lineNbr": 203,
      "author": {
        "id": 7755
      },
      "writtenOn": "2021-02-23T13:54:38Z",
      "side": 1,
      "message": "kMaxWaitForFrameMs is hardcoded to 3000, defined here in the video_receive_stream.\nrtp_nack_history_ms has a default value of 1000 (hardcoded elsewhere)\n\nI want to allow values of rtx-time like 200ms which would lead to\n  if (200 \u003e 0 \u0026\u0026 3 * 200 \u003c 3000) {\n    return is_key_frame ? 200 * 600\n  }\nIf the value is 1000 (i.e. the default rtp_nack_history_ms) I want to go into the \"query the field trial or fallback to the default\" branch.\n\nthe wait_time_from_field_trial is actually two different values depending on whether it is a keyframe or not. Sadly assigning to a value with a ?: in an if is highly unreadable.",
      "parentUuid": "3e56bcf6_f2083bb5",
      "revId": "12b04d78ef4eb9e9bb6cb70c795909ecb5ca0a26",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}