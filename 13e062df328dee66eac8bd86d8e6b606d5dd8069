{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6d915a02_45f5c795",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-25T16:30:40Z",
      "side": 1,
      "message": "More stuff for https://webrtc-review.googlesource.com/c/src/+/261620/.\n\nMark, can you take a look? I\u0027m a bit unsure about the build-system changes. This requires changes to chromium to find the `pipewire_config`. Is that ok?",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "515e0dc1_5d049b04",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 8046
      },
      "writtenOn": "2022-05-26T09:56:49Z",
      "side": 1,
      "message": "Looks good to me as it doesn\u0027t change anything in the code. \n\nI\u0027m adding Salman to look into this as well, he uses portal/pipewore code in Chrome Remote Desktop so it\u0027s better to check whether this change doesn\u0027t break his usage. ",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "094726a4_84d8488e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-26T11:34:00Z",
      "side": 1,
      "message": "How do I handle the ownership of the new files? It\u0027s mostly moving code but into a new directory so the owner changes implicitly. Should I add a new OWNERS file? If yes, who should be in it?",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "056b6850_ee15d44a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 18829
      },
      "writtenOn": "2022-05-26T15:36:06Z",
      "side": 1,
      "message": "Thanks for adding me here Jan!\n\nI think the file moves are going to be problematic for the users in the chromium\u0027s remoting code downstream e.g. here are some existing usage of the files being renamed -- this has potential to cause breakage upon autoroll:\n\n$ git grep portal_request_response.h remoting/host/\nremoting/host/linux/remote_desktop_portal.h:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/portal_request_response.h\"\nremoting/host/linux/remote_desktop_portal_injector.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/portal_request_response.h\"\n\n$ git grep scoped_glib remoting/host/\nremoting/host/linux/input_injector_wayland.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/scoped_glib.h\"\nremoting/host/linux/remote_desktop_portal.h:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/scoped_glib.h\"\nremoting/host/linux/remote_desktop_portal_injector.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/scoped_glib.h\"\n\ngit grep xdg_desktop_portal_utils remoting/\nremoting/host/client_session.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/client_session.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/input_injector_metadata.h:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/linux/input_injector_wayland.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/linux/remote_desktop_portal.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/linux/remote_desktop_portal.h:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/linux/remote_desktop_portal_injector.cc:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\nremoting/host/linux/remote_desktop_portal_injector.h:#include \"third_party/webrtc/modules/desktop_capture/linux/wayland/xdg_desktop_portal_utils.h\"\n\nIdeally, we should update the paths on the caller at the same time (and atomically) as this change but given that `remoting/` is in a separate repo than WebRTC, I don\u0027t think there is a way to do this atomically. One way to go about it is to disable the builds for the code path on the caller side (e.g. removing `remoting_use_wayland` in https://source.chromium.org/chromium/chromium/src/+/main:tools/mb/mb_config.pyl;l\u003d2733?q\u003dtools%2Fmb%2Fmb_config.pyl) and getting your change in, then adjusting the `remoting/` code to use new paths and then re-enabling the buildbot to build the remoting side code. Note that disabling `remoting_use_wayland` flag is ok now only due to the fact that it is not being used actively right now, as it is still under development. May be Mark has an alternative/better strategy about how such changes are handled in general.",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "28b1169f_ff0bbc11",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 18829
      },
      "writtenOn": "2022-05-26T15:37:21Z",
      "side": 1,
      "message": "Looping in Lambros/Jamie as well in case he has more thoughts as to how this change can be merged without breaking remoting.",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cfa8af2b_8e89bdfe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 18829
      },
      "writtenOn": "2022-05-26T15:53:18Z",
      "side": 1,
      "message": "I believe if there is no OWNERS file in the current directory where the new files reside, then they will be inherited by OWNERS of the parent directory unless you add an OWNERS file and use `set noparent` (https://chromium.googlesource.com/chromium/src/+/HEAD/docs/code_reviews.md#owners-file-details). BTW, clicking on `SUGGEST OWNERS` button, I see that all the files have owners associated already (even for the new files).",
      "parentUuid": "094726a4_84d8488e",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9bad554_0f913b76",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6092
      },
      "writtenOn": "2022-05-26T17:11:02Z",
      "side": 1,
      "message": "What exactly is the change that breaks remoting?\n\nFor example, if you\u0027re just moving header files, you could leave shim headers in the old locations? Then remove the shims after you\u0027re confident that downstream code is updated?\n\nPlease could you edit the CL description\u0027s main body to describe the change in detail? For example, explain that headers are being moved from old/path to new/path? Or explain any changes you\u0027re making to public APIs?\n\nDisabling |remoting_use_wayland| is fine for getting this landed in a non-breaking way. But it sounds like there are other ways?",
      "parentUuid": "056b6850_ee15d44a",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c3403d91_281c8d79",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 18829
      },
      "writtenOn": "2022-05-26T17:13:26Z",
      "side": 1,
      "message": "\u003e For example, if you\u0027re just moving header files, you could leave shim headers in the old locations? Then remove the shims after you\u0027re confident that downstream code is updated?\n\nThat is a great suggestion!\n\n\u003e Disabling |remoting_use_wayland| is fine for getting this landed in a non-breaking way. But it sounds like there are other ways?\n\nI had a feeling that there would be a better(less complicated) alternatives. Thanks for proposing them here!",
      "parentUuid": "c9bad554_0f913b76",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae9667aa_6226147e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-30T10:53:30Z",
      "side": 1,
      "message": "\u003e Mark, can you take a look? I\u0027m a bit unsure about the build-system changes. This requires changes to chromium to find the `pipewire_config`. Is that ok?\n\nI\u0027ve readded the pipewire_config in desktop_capture/. It just includes the new one from common_video now. So chromium builds without changes. This can be removed when chromium us updated to use the new location.",
      "parentUuid": "6d915a02_45f5c795",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0d7d171_90787cbc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-30T10:53:30Z",
      "side": 1,
      "message": "I\u0027ve uploaded a new version that adds shim headers. Id did some build tests, but I\u0027m not sure if I enabled all necessary options.",
      "parentUuid": "c3403d91_281c8d79",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e918eab1_e16e7684",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9816
      },
      "writtenOn": "2022-05-31T07:00:05Z",
      "side": 1,
      "message": "I understand how the OWNERS files work on a technical level. What I\u0027m asking is this:\nWithout a new OWNERS file, the owners of `common_video` now own the moved files and the probably don\u0027t know a lot about pipewire and xdg-desktop-portal. So should I create a new OWNERS file and who should be listed there?",
      "parentUuid": "cfa8af2b_8e89bdfe",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13b80707_3be7b8c7",
        "filename": "common_video/linux/BUILD.gn",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 14134
      },
      "writtenOn": "2022-06-03T23:55:16Z",
      "side": 1,
      "message": "This should only be linked when is_linux is true.  Can you remove is_chromeos here and assert(is_linux)?\n\nSee the comments here: https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/webrtc.gni;drc\u003d49850c328cd4ba9c0ddeb0e8763bf13718188433;l\u003d134\n\nWe should go through and remove references to is_chromeos from the remainder of the desktop_capture module.  I filed https://crbug.com/1332905.",
      "revId": "13e062df328dee66eac8bd86d8e6b606d5dd8069",
      "serverId": "58829da1-049c-39fb-b951-ebdcd0984767"
    }
  ]
}